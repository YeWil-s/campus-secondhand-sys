# 校园二手商品交易系统 - 启动说明

## 🚀 快速启动

### 前提条件
1. **Python 3.8+** 已安装
2. **MySQL 8.0+** 已安装并启动
3. 默认MySQL配置：
   - 主机：localhost
   - 端口：3306
   - 用户名：root
   - 密码：123456

### 启动方式

#### 方式1：一键启动（推荐）
```cmd
# 双击运行（Windows）
start.bat

# 或运行Python脚本
python run.py
```

#### 方式2：手动启动
```cmd
# 1. 进入后端目录
cd backend

# 2. 安装依赖
pip install -r requirements.txt

# 3. 启动服务
python main.py
```

#### 方式3：使用简化测试
```cmd
# 先运行系统检查
python verify_system.py

# 再启动系统
python run.py
```

## 🌐 访问地址

启动成功后：

- **前端页面**：打开 `frontend/index.html`
- **API文档**：http://localhost:8000/docs
- **健康检查**：http://localhost:8000/api/health
- **后端API**：http://localhost:8000/api

## 📱 测试流程

1. **注册用户**
   - 注册用户A（用于发布商品）
   - 注册用户B（用于购买商品）

2. **发布商品**
   - 用户A登录
   - 进入"商品管理"
   - 点击"发布商品"
   - 填写商品信息并提交

3. **购买商品**
   - 用户B登录
   - 在首页浏览商品
   - 点击商品查看详情
   - 点击"立即购买"

4. **完成支付**
   - 创建订单后选择"完成支付"
   - 查看交易记录

5. **管理功能**
   - 查看个人资料
   - 管理自己的商品
   - 查看交易记录

## 🔧 故障排除

### 问题1：数据库连接失败
**症状**：启动时提示数据库连接错误
**解决**：
1. 确认MySQL服务已启动
2. 检查用户名密码是否正确（默认：root/123456）
3. 确认端口3306未被占用

### 问题2：模块导入失败
**症状**：提示缺少某个模块
**解决**：
```cmd
cd backend
pip install -r requirements.txt
```

### 问题3：前端无法访问后端
**症状**：前端页面显示连接错误
**解决**：
1. 确认后端服务正常启动
2. 检查端口8000是否被占用
3. 确认没有防火墙阻止

### 问题4：页面显示异常
**症状**：页面样式错误或功能不正常
**解决**：
1. 确保使用现代浏览器（Chrome、Firefox、Edge）
2. 检查浏览器控制台是否有错误
3. 确认网络连接正常

## 📁 项目结构

```
sys/
├── backend/                 # 后端代码
│   ├── main.py             # 主程序入口
│   ├── config.py           # 配置文件
│   ├── requirements.txt    # 依赖包
│   ├── database/          # 数据库相关
│   ├── routers/          # API路由
│   ├── schemas/          # 数据模型
│   └── utils/            # 工具函数
├── frontend/             # 前端代码
│   ├── index.html         # 主页面
│   ├── css/style.css     # 样式文件
│   └── js/             # JavaScript文件
├── start.bat            # Windows启动脚本
├── run.py              # Python启动脚本
├── verify_system.py     # 系统验证脚本
└── README.md           # 详细说明文档
```

## 🎯 核心功能

### 用户管理
- ✅ 用户注册（用户名、密码、手机号、校园卡号）
- ✅ 用户登录（JWT认证）
- ✅ 个人资料管理

### 商品管理  
- ✅ 发布商品（名称、描述、价格、分类）
- ✅ 浏览商品（搜索、分类、价格筛选）
- ✅ 商品详情查看
- ✅ 编辑/删除商品

### 交易管理
- ✅ 下单购买
- ✅ 完成支付
- ✅ 交易记录查询
- ✅ 交易详情查看

## 🔒 安全特性

- 🔐 JWT令牌认证
- 🔐 密码Bcrypt加密
- 🛡️ SQL注入防护
- 👤 用户权限控制
- ✅ 输入数据验证

## 📞 技术支持

如遇到问题：
1. 首先运行 `python verify_system.py` 检查系统状态
2. 查看控制台错误信息
3. 确认所有前提条件都已满足
4. 参考故障排除部分

---

**系统已准备就绪，祝您使用愉快！** 🎉